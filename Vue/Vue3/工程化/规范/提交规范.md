<!--
 * @Date: 2022-09-25
 * @Author: é©¬æ™“å· 724503670@qq.com
 * @LastEditors: é©¬æ™“å· 724503670@qq.com
 * @LastEditTime: 2022-09-27
 * @Description: 
-->
<!--
 * @Date: 2022-08-27
 * @Author: é©¬æ™“å· 724503670@qq.com
 * @LastEditors: é©¬æ™“å· 724503670@qq.com
 * @LastEditTime: 2022-09-26
 * @Description: 
-->
[æˆ‘æ˜¯å¦‚ä½•å¸¦é¢†å›¢é˜Ÿä»é›¶åˆ°ä¸€å»ºç«‹å‰ç«¯è§„èŒƒçš„ - æ–‡ç« ](https://juejin.cn/post/7085257325165936648)

[æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®](https://juejin.cn/post/7140443283209060383)

[ä»0å¼€å§‹æ­å»ºä¸€ä¸ªVue3.xä¼ä¸šçº§é¡¹ç›®éª¨æ¶](https://juejin.cn/post/7074885076823048223#comment)

#### git commit è§„èŒƒåŒ–æäº¤é…ç½®
1. husky
    * ä»‹ç»
    husky æ˜¯ä¸€ä¸ªè®©é…ç½® git hook å˜å¾—æ›´ç®€å•çš„å·¥å…·ï¼Œæ”¯æŒæ‰€æœ‰çš„gité’©å­ã€‚å®ƒå¯ä»¥å°†gitå†…ç½®çš„é’©å­æš´éœ²å‡ºæ¥ï¼Œå¾ˆæ–¹ä¾¿åœ°è¿›è¡Œé’©å­å‘½ä»¤æ³¨å…¥ï¼Œè€Œä¸éœ€è¦åœ¨.git/hooksç›®å½•ä¸‹è‡ªå·±å†™shellè„šæœ¬äº†ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥lintæ‚¨çš„æäº¤æ¶ˆæ¯ã€è¿è¡Œæµ‹è¯•ã€lintä»£ç ç­‰ã€‚å½“ä½ commitæˆ–pushçš„æ—¶å€™ã€‚huskyè§¦å‘æ‰€æœ‰gité’©å­è„šæœ¬ã€‚

    * å®‰è£…
    ```cmd
    pnpm add husky -D
    ```

    * é…ç½®
    1. è¿è¡Œå‘½ä»¤ï¼Œè¿è¡Œåå°†ç”Ÿæˆ .husky æ–‡ä»¶å¤¹
    ```cmd
    pnpm run husky install
    ```

    2. è¿›å…¥ .husky æ–‡ä»¶å¤¹æ–°å»º commit-msgã€pre-commit ä¸¤ä¸ªæ–‡ä»¶å¹¶æ·»åŠ å†…å®¹
    * commit-msg
    ```shell
    #!/usr/bin/env sh
    . "$(dirname "$0")/_/husky.sh"

    npx commitlint --edit $1
    ```
    * pre-commit
    ```shell
    #!/usr/bin/env sh
    . "$(dirname "$0")/_/husky.sh"

    npx lint-staged --allow-empty
    ```

2. lint-staged
    * ä»‹ç»
    lint-stagedï¼šè¿™æ˜¯æœ¬åœ°æš‚å­˜ä»£ç çš„æ£€æŸ¥å·¥å…·ï¼Œå½“ä½ gitæäº¤ä»£ç æ—¶ï¼Œä¼šè‡ªåŠ¨æ£€æŸ¥æš‚å­˜åŒºæ˜¯å¦ç¬¦åˆé¡¹ç›®eslintå’Œprettierè§„èŒƒ

    * å®‰è£…
    ```cmd
    pnpm add lint-staged -D
    ```

    * é…ç½®
    

3. æ·»åŠ è‡ªå®šä¹‰çš„è¾…åŠ©æäº¤ä¾èµ– commitlint æ ¡éªŒ

    * ä»‹ç»
    * commitizenï¼šæ˜¯ä¸€ä¸ª ciå·¥å…·ï¼Œä»£æ›¿ git commitï¼Œå½“è¾“å…¥ `git cz` æ—¶ä¼šå¼•å¯¼é€‰æ‹©æäº¤ç±»å‹
    * cz-customizableï¼šè‡ªå®šä¹‰ commitizen
    * commitlint-config-czï¼šè‡ªå®šä¹‰ commit ä¿¡æ¯

    * å®‰è£…
    ```cmd
    pnpm add commitizen cz-customizable commitlint-config-cz -D
    ```

    * é…ç½®
    * package.json
    ```json
    "script": {
        "commit": "git add . && git-cz",
    }
    "config":{
        "commitizen":{
            "path": "./node_modules/cz-customizable"
        }
    }
    ```

    * æ–°å¢æ–‡ä»¶ commitlint.config.js
    ```javascript
    /*
    "off"æˆ–è€…0:å…³é—­è§„åˆ™ "warn"æˆ–1:å¼€å¯è§„åˆ™æŠ›å‡ºè­¦å‘Š "error"æˆ–2:å¼€å¯è§„åˆ™æŠ›å‡ºé”™è¯¯
    */
    module.exports = {
    extends: ['cz'],
    rules: {
        'body-leading-blank': [2, 'always'], // bodyä¸Šé¢æœ‰æ¢è¡Œ
        'footer-leading-blank': [1, 'always'], // footerä¸Šé¢æœ‰æ¢è¡Œ
        'header-max-length': [2, 'always', 108], // headerä¸Šæœ€å¤§108å­—ç¬¦
        'type-case': [0],
        'type-empty': [0],
        'scope-empty': [0],
        'scope-case': [0],
        'subject-full-stop': [0, 'never'],
        'subject-case': [0, 'never'],
        'type-enum': [
        2,
        'always',
        [
            'feat', // æ–°å¢åŠŸèƒ½ã€é¡µé¢
            'fix', // ä¿®è¡¥bug
            'docs', // ä¿®æ”¹æ–‡æ¡£ã€æ³¨é‡Š
            'style', // æ ¼å¼ï¼šä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ã€ç©ºæ ¼ã€æ ¼å¼åŒ–ç­‰ç­‰
            'ui', // uiä¿®æ”¹ï¼šå¸ƒå±€ã€cssæ ·å¼ç­‰ç­‰
            'hotfix', // ä¿®å¤çº¿ä¸Šç´§æ€¥bug
            'build', // æ”¹å˜æ„å»ºæµç¨‹ï¼Œæ–°å¢ä¾èµ–åº“ã€å·¥å…·ç­‰ï¼ˆä¾‹å¦‚:ä¿®æ”¹webpackï¼‰
            'refactor', // ä»£ç é‡æ„ï¼Œæœªæ–°å¢ä»»ä½•åŠŸèƒ½å’Œä¿®å¤ä»»ä½•bug
            'revert', // å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
            'perf', // ä¼˜åŒ–ï¼šæå‡æ€§èƒ½ã€ç”¨æˆ·ä½“éªŒç­‰
            'ci', // å¯¹CI/CDé…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„æ›´æ”¹
            'chore', // å…¶ä»–ä¸ä¿®æ”¹srcæˆ–æµ‹è¯•æ–‡ä»¶çš„æ›´æ”¹
            'test', // æµ‹è¯•ç”¨ä¾‹ï¼šåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•
            'update' // æ›´æ–°ï¼šæ™®é€šæ›´æ–°
        ]
        ]
    }
    }

    ```

    * æ–°å¢æ–‡ä»¶ cz-config.js
    ```javascript
    'use strict'
    module.exports = {
    types: [
        { value: 'update', name: ' ğŸŒ´ æ™®é€šæ›´æ–°' },
        { value: 'feat', name: ' âœ¨ æ–°å¢åŠŸèƒ½' },
        { value: 'fix', name: ' ğŸ”¨ ä¿®å¤bug' },
        { value: 'ui', name: ' ğŸ‘— uiä¿®æ”¹' },
        { value: 'perf', name: ' âš¡ï¸ ä¼˜åŒ–' },
        { value: 'style', name: ' ğŸ¨ ä»£ç é£æ ¼ç¾åŒ–' },
        { value: 'docs', name: ' ğŸ“š æ–‡æ¡£' },
        { value: 'hotfix', name: ' ğŸ”¥ ç´§æ€¥ä¿®å¤ bug' },
        { value: 'revert', name: ' ğŸ”™ ä»£ç å›é€€' },
        { value: 'ci', name: ' ğŸ‘·â€â™‚ï¸ å·¥ç¨‹è‡ªåŠ¨åŒ–æ„å»º' },
        { value: 'test', name: ' âœ… æµ‹è¯•' },
        { value: 'refactor', name: ' â™»ï¸ ä»£ç é‡æ„' },
        { value: 'chore', name: ' ğŸ”§ æ„å»º/å·¥ç¨‹ä¾èµ–/å·¥å…·' },
        { value: 'build', name: ' ğŸ“¦ï¸ å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ– (ä¾‹å¦‚scopes: webpackã€vite ç­‰)' }
    ],
    // äº¤äº’æç¤ºä¿¡æ¯
    messages: {
        type: 'è¯·é€‰æ‹©æäº¤ç±»å‹ï¼š(å¿…å¡«)',
        customScope: 'è¯·æè¿°æ–‡ä»¶ä¿®æ”¹èŒƒå›´ (å¯é€‰)',
        subject: 'è¯·å¯¹æœ¬æ¬¡æäº¤è¿›è¡Œç®€çŸ­æè¿° (å¿…å¡«)',
        body: 'å¯¹æœ¬æ¬¡æäº¤è¿›è¡Œæ›´è¯¦ç»†çš„è¯´æ˜ (å¯é€‰)',
        breaking: 'è¯·åˆ—å‡ºä»»ä½•BREAKING CHANGES(ç ´åæ€§ä¿®æ”¹) (å¯é€‰)',
        footer: 'è¯·è¾“å…¥è¦å…³é—­çš„issueï¼Œä¾‹å¦‚ï¼š#31 (å¯é€‰)',
        confirmCommit: 'ç¡®å®šæäº¤æ­¤è¯´æ˜å—?ï¼ˆyes/noï¼‰'
    },
    allowCustomScopes: true,
    // è®¾ç½®é€‰æ‹©äº†é‚£äº›typeï¼Œæ‰è¯¢é—® breaking message
    allowBreakingChanges: ['feat', 'fix', 'perf', 'hotfix', 'revert', 'refactor'],
    subjectLimit: 100
    }
    ```

#### ä½¿ç”¨
  * pnpm run commit (æ›¿ä»£ git add . å’Œ git commit)


#### è‡ªåŠ¨ç”Ÿæˆ changelog
* ä»‹ç»
conventional-changelog-cli ç”Ÿæˆæœ€æ–°çš„æäº¤è®°å½•æ–‡æ¡£

* å®‰è£…
```cmd
pnpm add conventional-changelog-cli -D
```

* é…ç½®
* package.json
```json
"script": {
    "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s -r 0"
}
```